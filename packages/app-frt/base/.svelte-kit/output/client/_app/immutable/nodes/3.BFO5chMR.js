import{s as $,n as G,d as b,b as J,c as q,e as u,o as s,p as ee,j as E,f as v,g as V,q as j,h as F,l as T,k as m,t as W,r as x,u as R,v as M}from"../chunks/p6HUggiK.js";import{S as te,i as le}from"../chunks/CEchjp2R.js";import{g as se}from"../chunks/CWSYcIcl.js";import{a as ae}from"../chunks/Cv7qX89F.js";function Y(i){let e,l;return{c(){e=m("div"),l=W(i[5]),this.h()},l(t){e=v(t,"DIV",{class:!0,role:!0});var a=V(e);l=F(a,i[5]),a.forEach(b),this.h()},h(){s(e,"class","alert alert-success svelte-ste804"),s(e,"role","status")},m(t,a){q(t,e,a),u(e,l)},p(t,a){a&32&&J(l,t[5])},d(t){t&&b(e)}}}function Z(i){let e,l;return{c(){e=m("div"),l=W(i[4]),this.h()},l(t){e=v(t,"DIV",{class:!0,role:!0});var a=V(e);l=F(a,i[4]),a.forEach(b),this.h()},h(){s(e,"class","alert alert-error svelte-ste804"),s(e,"role","alert")},m(t,a){q(t,e,a),u(e,l)},p(t,a){a&16&&J(l,t[4])},d(t){t&&b(e)}}}function ne(i){let e,l,t,a="Email",C,o,_,r,d,O="Password",D,c,N,w,y,U="Confirm password",B,g,f,n,L=i[6]?"Creating accountâ€¦":"Create account",A,I,z;return{c(){e=m("form"),l=m("div"),t=m("label"),t.textContent=a,C=T(),o=m("input"),_=T(),r=m("div"),d=m("label"),d.textContent=O,D=T(),c=m("input"),N=T(),w=m("div"),y=m("label"),y.textContent=U,B=T(),g=m("input"),f=T(),n=m("button"),A=W(L),this.h()},l(k){e=v(k,"FORM",{class:!0});var p=V(e);l=v(p,"DIV",{class:!0});var h=V(l);t=v(h,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1txsesn"&&(t.textContent=a),C=E(h),o=v(h,"INPUT",{id:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),h.forEach(b),_=E(p),r=v(p,"DIV",{class:!0});var P=V(r);d=v(P,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(d)!=="svelte-2e9ksf"&&(d.textContent=O),D=E(P),c=v(P,"INPUT",{id:!0,type:!0,autocomplete:!0,placeholder:!0,minlength:!0,class:!0}),P.forEach(b),N=E(p),w=v(p,"DIV",{class:!0});var H=V(w);y=v(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(y)!=="svelte-y61ug5"&&(y.textContent=U),B=E(H),g=v(H,"INPUT",{id:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),H.forEach(b),f=E(p),n=v(p,"BUTTON",{type:!0,class:!0});var S=V(n);A=F(S,L),S.forEach(b),p.forEach(b),this.h()},h(){s(t,"for","reg-email"),s(t,"class","svelte-ste804"),s(o,"id","reg-email"),s(o,"type","email"),o.required=!0,s(o,"autocomplete","email"),s(o,"placeholder","you@example.com"),o.disabled=i[6],s(o,"class","svelte-ste804"),s(l,"class","field svelte-ste804"),s(d,"for","reg-password"),s(d,"class","svelte-ste804"),s(c,"id","reg-password"),s(c,"type","password"),c.required=!0,s(c,"autocomplete","new-password"),s(c,"placeholder","â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),s(c,"minlength","8"),c.disabled=i[6],s(c,"class","svelte-ste804"),s(r,"class","field svelte-ste804"),s(y,"for","confirm-password"),s(y,"class","svelte-ste804"),s(g,"id","confirm-password"),s(g,"type","password"),g.required=!0,s(g,"autocomplete","new-password"),s(g,"placeholder","â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),g.disabled=i[6],s(g,"class","svelte-ste804"),s(w,"class","field svelte-ste804"),s(n,"type","submit"),s(n,"class","btn btn-primary btn-full svelte-ste804"),n.disabled=i[6],s(e,"class","auth-form svelte-ste804"),e.noValidate=!0},m(k,p){q(k,e,p),u(e,l),u(l,t),u(l,C),u(l,o),R(o,i[1]),u(e,_),u(e,r),u(r,d),u(r,D),u(r,c),R(c,i[2]),u(e,N),u(e,w),u(w,y),u(w,B),u(w,g),R(g,i[3]),u(e,f),u(e,n),u(n,A),I||(z=[M(o,"input",i[11]),M(c,"input",i[12]),M(g,"input",i[13]),M(e,"submit",i[8])],I=!0)},p(k,p){p&64&&(o.disabled=k[6]),p&2&&o.value!==k[1]&&R(o,k[1]),p&64&&(c.disabled=k[6]),p&4&&c.value!==k[2]&&R(c,k[2]),p&64&&(g.disabled=k[6]),p&8&&g.value!==k[3]&&R(g,k[3]),p&64&&L!==(L=k[6]?"Creating accountâ€¦":"Create account")&&J(A,L),p&64&&(n.disabled=k[6])},d(k){k&&b(e),I=!1,x(z)}}}function re(i){let e,l,t,a="Email",C,o,_,r,d,O="Password",D,c,N,w,y=i[6]?"Signing inâ€¦":"Sign in",U,B,g;return{c(){e=m("form"),l=m("div"),t=m("label"),t.textContent=a,C=T(),o=m("input"),_=T(),r=m("div"),d=m("label"),d.textContent=O,D=T(),c=m("input"),N=T(),w=m("button"),U=W(y),this.h()},l(f){e=v(f,"FORM",{class:!0});var n=V(e);l=v(n,"DIV",{class:!0});var L=V(l);t=v(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1p9d3fm"&&(t.textContent=a),C=E(L),o=v(L,"INPUT",{id:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),L.forEach(b),_=E(n),r=v(n,"DIV",{class:!0});var A=V(r);d=v(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(d)!=="svelte-pepa0a"&&(d.textContent=O),D=E(A),c=v(A,"INPUT",{id:!0,type:!0,autocomplete:!0,placeholder:!0,class:!0}),A.forEach(b),N=E(n),w=v(n,"BUTTON",{type:!0,class:!0});var I=V(w);U=F(I,y),I.forEach(b),n.forEach(b),this.h()},h(){s(t,"for","email"),s(t,"class","svelte-ste804"),s(o,"id","email"),s(o,"type","email"),o.required=!0,s(o,"autocomplete","email"),s(o,"placeholder","you@example.com"),o.disabled=i[6],s(o,"class","svelte-ste804"),s(l,"class","field svelte-ste804"),s(d,"for","password"),s(d,"class","svelte-ste804"),s(c,"id","password"),s(c,"type","password"),c.required=!0,s(c,"autocomplete","current-password"),s(c,"placeholder","â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"),c.disabled=i[6],s(c,"class","svelte-ste804"),s(r,"class","field svelte-ste804"),s(w,"type","submit"),s(w,"class","btn btn-primary btn-full svelte-ste804"),w.disabled=i[6],s(e,"class","auth-form svelte-ste804"),e.noValidate=!0},m(f,n){q(f,e,n),u(e,l),u(l,t),u(l,C),u(l,o),R(o,i[1]),u(e,_),u(e,r),u(r,d),u(r,D),u(r,c),R(c,i[2]),u(e,N),u(e,w),u(w,U),B||(g=[M(o,"input",i[9]),M(c,"input",i[10]),M(e,"submit",i[7])],B=!0)},p(f,n){n&64&&(o.disabled=f[6]),n&2&&o.value!==f[1]&&R(o,f[1]),n&64&&(c.disabled=f[6]),n&4&&c.value!==f[2]&&R(c,f[2]),n&64&&y!==(y=f[6]?"Signing inâ€¦":"Sign in")&&J(U,y),n&64&&(w.disabled=f[6])},d(f){f&&b(e),B=!1,x(g)}}}function oe(i){let e,l="Already have an account?",t,a,C="Sign in",o,_;return{c(){e=m("span"),e.textContent=l,t=T(),a=m("button"),a.textContent=C,this.h()},l(r){e=v(r,"SPAN",{"data-svelte-h":!0}),j(e)!=="svelte-1j1syfp"&&(e.textContent=l),t=E(r),a=v(r,"BUTTON",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-1bvyf22"&&(a.textContent=C),this.h()},h(){s(a,"class","link-btn svelte-ste804")},m(r,d){q(r,e,d),q(r,t,d),q(r,a,d),o||(_=M(a,"click",i[15]),o=!0)},p:G,d(r){r&&(b(e),b(t),b(a)),o=!1,_()}}}function ie(i){let e,l="Don't have an account?",t,a,C="Sign up",o,_;return{c(){e=m("span"),e.textContent=l,t=T(),a=m("button"),a.textContent=C,this.h()},l(r){e=v(r,"SPAN",{"data-svelte-h":!0}),j(e)!=="svelte-11ao6qv"&&(e.textContent=l),t=E(r),a=v(r,"BUTTON",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-1oszoju"&&(a.textContent=C),this.h()},h(){s(a,"class","link-btn svelte-ste804")},m(r,d){q(r,e,d),q(r,t,d),q(r,a,d),o||(_=M(a,"click",i[14]),o=!0)},p:G,d(r){r&&(b(e),b(t),b(a)),o=!1,_()}}}function ue(i){let e,l,t,a,C='<span class="logo-symbol svelte-ste804">ðŸŒŒ</span> <span class="logo-text svelte-ste804">Universo Platformo</span>',o,_,r=i[0]==="login"?"Welcome back":"Create account",d,O,D,c=i[0]==="login"?"Sign in to your account to continue":"Join and explore all worlds",N,w,y,U,B,g,f=i[5]&&Y(i),n=i[4]&&Z(i);function L(h,P){return h[0]==="login"?re:ne}let A=L(i),I=A(i);function z(h,P){return h[0]==="login"?ie:oe}let k=z(i),p=k(i);return{c(){e=T(),l=m("div"),t=m("div"),a=m("div"),a.innerHTML=C,o=T(),_=m("h1"),d=W(r),O=T(),D=m("p"),N=W(c),w=T(),f&&f.c(),y=T(),n&&n.c(),U=T(),I.c(),B=T(),g=m("div"),p.c(),this.h()},l(h){ee("svelte-mbbbu7",document.head).forEach(b),e=E(h),l=v(h,"DIV",{class:!0});var H=V(l);t=v(H,"DIV",{class:!0});var S=V(t);a=v(S,"DIV",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-chrlp9"&&(a.innerHTML=C),o=E(S),_=v(S,"H1",{class:!0});var K=V(_);d=F(K,r),K.forEach(b),O=E(S),D=v(S,"P",{class:!0});var Q=V(D);N=F(Q,c),Q.forEach(b),w=E(S),f&&f.l(S),y=E(S),n&&n.l(S),U=E(S),I.l(S),B=E(S),g=v(S,"DIV",{class:!0});var X=V(g);p.l(X),X.forEach(b),S.forEach(b),H.forEach(b),this.h()},h(){document.title="Sign in â€“ Universo Platformo",s(a,"class","auth-logo svelte-ste804"),s(_,"class","auth-title svelte-ste804"),s(D,"class","auth-subtitle svelte-ste804"),s(g,"class","auth-switch svelte-ste804"),s(t,"class","auth-card svelte-ste804"),s(l,"class","auth-page svelte-ste804")},m(h,P){q(h,e,P),q(h,l,P),u(l,t),u(t,a),u(t,o),u(t,_),u(_,d),u(t,O),u(t,D),u(D,N),u(t,w),f&&f.m(t,null),u(t,y),n&&n.m(t,null),u(t,U),I.m(t,null),u(t,B),u(t,g),p.m(g,null)},p(h,[P]){P&1&&r!==(r=h[0]==="login"?"Welcome back":"Create account")&&J(d,r),P&1&&c!==(c=h[0]==="login"?"Sign in to your account to continue":"Join and explore all worlds")&&J(N,c),h[5]?f?f.p(h,P):(f=Y(h),f.c(),f.m(t,y)):f&&(f.d(1),f=null),h[4]?n?n.p(h,P):(n=Z(h),n.c(),n.m(t,U)):n&&(n.d(1),n=null),A===(A=L(h))&&I?I.p(h,P):(I.d(1),I=A(h),I&&(I.c(),I.m(t,B))),k===(k=z(h))&&p?p.p(h,P):(p.d(1),p=k(h),p&&(p.c(),p.m(g,null)))},i:G,o:G,d(h){h&&(b(e),b(l)),f&&f.d(),n&&n.d(),I.d(),p.d()}}}function ce(i,e,l){let t="login",a="",C="",o="",_=null,r=null,d=!1;async function O(f){f.preventDefault(),l(4,_=null),l(6,d=!0);try{await ae.login(a,C),await se("/")}catch(n){l(4,_=n instanceof Error?n.message:"Login failed")}finally{l(6,d=!1)}}async function D(f){if(f.preventDefault(),l(4,_=null),l(5,r=null),C!==o){l(4,_="Passwords do not match");return}l(6,d=!0);try{const n=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:C,termsAccepted:!0,privacyAccepted:!0})}),L=await n.json();if(!n.ok)throw new Error(L.message??"Registration failed");l(5,r=L.message??"Registration successful! Check your email to confirm."),l(0,t="login")}catch(n){l(4,_=n instanceof Error?n.message:"Registration failed")}finally{l(6,d=!1)}}function c(){a=this.value,l(1,a)}function N(){C=this.value,l(2,C)}function w(){a=this.value,l(1,a)}function y(){C=this.value,l(2,C)}function U(){o=this.value,l(3,o)}return[t,a,C,o,_,r,d,O,D,c,N,w,y,U,()=>{l(0,t="register"),l(4,_=null),l(5,r=null)},()=>{l(0,t="login"),l(4,_=null),l(5,r=null)}]}class ve extends te{constructor(e){super(),le(this,e,ce,ue,$,{})}}export{ve as component};
